<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Записаться на курс</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 90vh;
        }

        a {
            text-decoration: none;
            color: #007bff;
            margin-bottom: 20px;
            display: inline-block;
            padding: 10px 20px;
            border-radius: 5px;
            background-color: #e9ecef;
            transition: background-color 0.3s, color 0.3s;
            align-self: flex-start;
            margin-left: 20px;
        }

        a:hover {
            background-color: #007bff;
            color: #fff;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-top: 20px;
            font-size: 2.5rem;
        }

        h2 {
            color: #444;
            text-align: center;
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        form {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0px 4px 15px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
            margin: 20px auto;
            display: flex;
            flex-direction: column;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #555;
            font-size: 1rem;
        }

        select,
        input[type="number"],
        input[type="date"],
        input[type="time"],
        button[type="submit"] {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 1rem;
            background-color: #f9f9f9;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        select:focus,
        input[type="number"]:focus,
        input[type="date"]:focus,
        input[type="time"]:focus {
            border-color: #007bff;
            box-shadow: 0 0 5px rgba(0, 123, 255, 0.5);
        }

        button[type="submit"] {
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            font-size: 1.1rem;
        }

        button[type="submit"]:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }

        p {
            margin-bottom: 15px;
            color: #555;
            font-size: 1rem;
        }

        span {
            font-weight: bold;
            color: #333;
        }

        .info {
            text-align: center;
            margin-bottom: 30px;
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            max-width: 500px;
            width: 100%;
        }

        .info p {
            margin: 10px 0;
        }
    </style>
</head>

<body>
    <a href="/services">Назад</a>
    <h1>Форма заявки на услугу</h1>

    {{#if services}}
    <div class="info">
        <h2>Важная Информация:</h2>
        <p>Название: {{services.Name}}</p>
        <p>Описание: {{services.Description}}</p>
        <p>Тип: {{services.TypeName}}</p>
        <p>Специалист: {{services.Master}}</p>
        <p>Город: {{services.Location}}</p>
    </div>
    {{/if}}

    <form action="/enrollment/addEnrollment" method="POST">
        <input type="hidden" name="ServiceId" value="{{services.ServiceId}}"> 
        <input type="hidden" name="UserId" value="{{userId}}"> 
        <input type="hidden" name="Location" value="{{services.Location}}"> 

        <label for="date">Дата занятия:</label>
        <input type="date" id="date" name="Date" required>
        
        <label for="time">Время начала:</label>
        <select id="time" name="Time" required>
        </select>

        <label for="duration">Продолжительность (в часах):</label>
        <input type="number" id="duration" name="Duration" required min="1" max="48">

        <button type="submit">Отправить заявку</button>
    </form>

    <script>
document.addEventListener('DOMContentLoaded', function () {
    // Вычисляем завтрашний день
    const tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1); // Завтрашний день
    const tomorrowDate = tomorrow.toISOString().split('T')[0]; // Формат YYYY-MM-DD
    
    // Ограничиваем максимальную дату до 31 декабря 2099 года
    const maxDate = "2099-12-31";
    
    const dateInput = document.getElementById('date');
    
    dateInput.setAttribute('min', tomorrowDate); 
    dateInput.setAttribute('max', maxDate); 
    dateInput.addEventListener('change', function () {
        const selectedDate = new Date(dateInput.value);
        if (selectedDate < tomorrow) {
            dateInput.value = tomorrowDate;
        }
    });

    const timeSelect = document.getElementById('time');

    for (let h = 0; h < 24; h++) {
        for (let m = 0; m < 60; m += 10) {
            const hours = h < 10 ? '0' + h : h;
            const minutes = m < 10 ? '0' + m : m;
            const timeOption = document.createElement('option');
            timeOption.value = `${hours}:${minutes}`;
            timeOption.textContent = `${hours}:${minutes}`;
            timeSelect.appendChild(timeOption);
        }
    }
});

    document.getElementById('duration').addEventListener('input', function () {
        let value = parseInt(this.value);
        if (value < 1) {
            this.value = 1;  // Минимум 1
        } else if (value > 48) {
            this.value = 48;  // Максимум 48
        }
    });
    </script>
</body>

</html>
